const _0x2b1b54=_0x368b;(function(_0xecdeed,_0x2c7e28){const _0x861635=_0x368b,_0x1099b0=_0xecdeed();while(!![]){try{const _0x1734d6=parseInt(_0x861635(0x1ab))/0x1+parseInt(_0x861635(0x1cc))/0x2+parseInt(_0x861635(0x191))/0x3+-parseInt(_0x861635(0x197))/0x4*(-parseInt(_0x861635(0x1c2))/0x5)+parseInt(_0x861635(0x196))/0x6+parseInt(_0x861635(0x1af))/0x7*(parseInt(_0x861635(0x1b3))/0x8)+-parseInt(_0x861635(0x1b5))/0x9*(parseInt(_0x861635(0x1c7))/0xa);if(_0x1734d6===_0x2c7e28)break;else _0x1099b0['push'](_0x1099b0['shift']());}catch(_0x13c6ab){_0x1099b0['push'](_0x1099b0['shift']());}}}(_0x54a5,0x18914));import{Helper}from'../utils/helper.js';import _0x258801 from'../utils/logger.js';import{ethers}from'ethers';import{RPC}from'./network/rpc.js';import'./core.js';import _0x434bbb from'./db/sqlite.js';import _0x2394d9 from'../utils/enums/tx-type.js';function _0x368b(_0x5e3e72,_0x100e5d){const _0x54a55a=_0x54a5();return _0x368b=function(_0x368b39,_0x1a79c5){_0x368b39=_0x368b39-0x18e;let _0x516e33=_0x54a55a[_0x368b39];return _0x516e33;},_0x368b(_0x5e3e72,_0x100e5d);}import'./ethers-client.js';export default class DodoClient{constructor(_0x10ec81,_0x50ada2,_0x1b9e27){const _0x5337f5=_0x368b;this[_0x5337f5(0x1b6)]=_0x50ada2,this[_0x5337f5(0x1d1)]=_0x10ec81,this[_0x5337f5(0x192)]=_0x1b9e27,this[_0x5337f5(0x1b0)]=0xbb8,this[_0x5337f5(0x1a1)]='a37546505892e1a952';}async['getTokenDecimals'](_0x2067fa){const _0x34eeb5=_0x368b;try{const _0x4bbe56=this[_0x34eeb5(0x192)][_0x34eeb5(0x1b8)](_0x2067fa);return _0x2067fa[_0x34eeb5(0x1b9)]?RPC[_0x34eeb5(0x1b4)]:await _0x4bbe56[_0x34eeb5(0x1a5)]();}catch(_0x5f3b74){_0x258801[_0x34eeb5(0x1ba)](_0x34eeb5(0x1a6)+_0x2067fa+':\x20'+_0x5f3b74[_0x34eeb5(0x1ac)]);throw _0x5f3b74;}}async[_0x2b1b54(0x1d0)](_0x4de229){const _0x2cf1a6=_0x2b1b54;try{const _0x29b0a1=this['ethersClient'][_0x2cf1a6(0x1b8)](_0x4de229);return _0x4de229[_0x2cf1a6(0x1b9)]?RPC['SYMBOL']:await _0x29b0a1[_0x2cf1a6(0x1c3)]();}catch(_0x5b2676){_0x258801[_0x2cf1a6(0x1ba)]('Failed\x20to\x20get\x20decimals\x20for\x20token\x20'+_0x4de229+':\x20'+_0x5b2676[_0x2cf1a6(0x1ac)]);throw _0x5b2676;}}async[_0x2b1b54(0x19c)](_0x5655d0,_0x250eb4,_0x495e6c){const _0x934b60=_0x2b1b54;await Helper[_0x934b60(0x1b2)](Helper['defaultLogDelay'],this[_0x934b60(0x1d1)],_0x934b60(0x18f)+await this['getTokenSymbol'](_0x5655d0)+_0x934b60(0x1a3)+await this['getTokenSymbol'](_0x250eb4)+'..',this[_0x934b60(0x1b6)]);const _0x5166b2={'chainId':RPC['CHAINID'],'deadLine':Helper[_0x934b60(0x1c5)](),'apikey':this['dodoApiKey'],'slippage':Helper[_0x934b60(0x19b)],'source':'dodoV2AndMixWasm','toTokenAddress':_0x250eb4['CA'],'fromTokenAddress':_0x5655d0['CA'],'userAddr':this[_0x934b60(0x192)][_0x934b60(0x1bd)],'estimateGas':!![],'fromAmount':_0x495e6c[_0x934b60(0x1ad)]()},_0x30795e=await this[_0x934b60(0x1b6)]['fetch'](_0x934b60(0x1cf)+Helper[_0x934b60(0x194)](_0x5166b2));if(_0x30795e[_0x934b60(0x1ca)]['status']!=0xc8){if(!_0x30795e['data'][_0x934b60(0x1ca)][_0x934b60(0x1cd)]('no\x20route'))return _0x258801[_0x934b60(0x1ba)](_0x934b60(0x1c9)+_0x30795e['data'][_0x934b60(0x1ca)]+'.\x20Retrying...'),this['getDodoRoute'](_0x5655d0,_0x250eb4,_0x495e6c);else throw Error(_0x934b60(0x1c9)+_0x30795e[_0x934b60(0x1ca)][_0x934b60(0x1ca)]);}return _0x30795e[_0x934b60(0x1ca)]['data'];}async[_0x2b1b54(0x1ae)](_0x1a342d,_0x57a75e,_0x25b772,_0xe41539){const _0x7391e8=_0x2b1b54;let _0x4319f3=_0x1a342d['NATIVE']?ethers[_0x7391e8(0x193)](_0x25b772['toString'](),await this[_0x7391e8(0x1bc)](_0x1a342d)):ethers['parseUnits'](_0x25b772[_0x7391e8(0x1ad)](),await this[_0x7391e8(0x1bc)](_0x1a342d));await Helper[_0x7391e8(0x1b2)](Helper[_0x7391e8(0x1b7)]/0x2,this[_0x7391e8(0x1d1)],_0x7391e8(0x198)+_0x25b772+'\x20'+await this[_0x7391e8(0x1d0)](_0x1a342d)+_0x7391e8(0x19d)+await this['getTokenSymbol'](_0x57a75e),this[_0x7391e8(0x1b6)]);const _0x5921da=await this[_0x7391e8(0x19c)](_0x1a342d,_0x57a75e,_0x4319f3),_0x84c116=_0x5921da[_0x7391e8(0x1c1)];!_0x1a342d['NATIVE']&&await this[_0x7391e8(0x192)][_0x7391e8(0x199)](_0x1a342d,_0xe41539['CA']);await Helper[_0x7391e8(0x1b2)](Helper['defaultLogDelay']*0x2,this[_0x7391e8(0x1d1)],_0x7391e8(0x190)+_0x25b772+'\x20'+await this['getTokenSymbol'](_0x1a342d)+_0x7391e8(0x1a3)+_0x84c116+'\x20'+await this[_0x7391e8(0x1d0)](_0x57a75e),this['core']);const _0x217f8e={'data':_0x5921da[_0x7391e8(0x1ca)],'to':_0x5921da['to']},_0xe3e93e=await this['ethersClient'][_0x7391e8(0x1be)](_0x217f8e,_0xe41539['CA'],_0x1a342d[_0x7391e8(0x1b9)]?_0x5921da[_0x7391e8(0x1bf)]:0x0);await this['ethersClient'][_0x7391e8(0x195)](_0xe3e93e),await _0x434bbb['insertData'](this['ethersClient'][_0x7391e8(0x1bd)],new Date()[_0x7391e8(0x1c0)](),_0x2394d9['Type'][_0x7391e8(0x1cb)]),await Helper['delay'](Helper[_0x7391e8(0x1b7)],this['acc'],_0x7391e8(0x1a9)+_0x25b772+'\x20'+await this[_0x7391e8(0x1d0)](_0x1a342d)+'\x20to\x20'+_0x84c116+'\x20'+await this[_0x7391e8(0x1d0)](_0x57a75e),this['core']);}async[_0x2b1b54(0x19a)](_0x1ef530,_0x4b118e,_0x2fba17,_0x4c995b,_0x4729eb,_0x473554,_0x4c64c0,_0x4f7ae9){const _0x30b336=_0x2b1b54,_0x5247b0=this[_0x30b336(0x192)]['createContract'](_0x473554);await Helper[_0x30b336(0x1b2)](Helper[_0x30b336(0x1b7)],this['acc'],_0x30b336(0x1a0)+_0x2fba17+']\x20'+await this['getTokenSymbol'](_0x1ef530)+_0x30b336(0x1a4)+_0x4c995b+']\x20'+await this['getTokenSymbol'](_0x4b118e),this[_0x30b336(0x1b6)]);!_0x1ef530[_0x30b336(0x1b9)]&&(await this[_0x30b336(0x192)]['approveTokenSpend'](_0x1ef530,_0x4729eb['CA']),await this[_0x30b336(0x192)][_0x30b336(0x1a8)](_0x1ef530,_0x2fba17,_0x4c64c0));!_0x4b118e[_0x30b336(0x1b9)]&&(await this['ethersClient'][_0x30b336(0x199)](_0x4b118e,_0x4729eb['CA']),await this[_0x30b336(0x192)][_0x30b336(0x1a8)](_0x4b118e,_0x4c995b,_0x4f7ae9));const _0x3b9d38=ethers[_0x30b336(0x193)](_0x2fba17[_0x30b336(0x1ad)](),await this[_0x30b336(0x1bc)](_0x1ef530)),_0x4bf94f=ethers[_0x30b336(0x193)](_0x4c995b[_0x30b336(0x1ad)](),await this[_0x30b336(0x1bc)](_0x4b118e)),_0xa69680=ethers[_0x30b336(0x193)](_0x30b336(0x1ce),_0x30b336(0x1aa)),_0x49f382=[_0x1ef530['CA'],_0x4b118e['CA'],_0x3b9d38,_0x4bf94f,_0xa69680,0x1,_0x4bf94f,![],Helper[_0x30b336(0x1c5)]()],_0x3eaa02=await _0x5247b0['createDODOVendingMachine'][_0x30b336(0x19f)](..._0x49f382),_0x213e56=await this[_0x30b336(0x192)][_0x30b336(0x1be)](_0x3eaa02,_0x473554['CA'],_0x1ef530['NATIVE']?_0x3b9d38:0x0);await this['ethersClient'][_0x30b336(0x195)](_0x213e56),await _0x434bbb[_0x30b336(0x1c8)](this[_0x30b336(0x192)][_0x30b336(0x1bd)],new Date()['toISOString'](),_0x2394d9['Type'][_0x30b336(0x18e)]);}async['addLiquidity'](_0x3f2f77,_0x2d15dd,_0xfb46e5,_0x100750,_0x4e0d30,_0x9856a9,_0x42faaa,_0x7ce8f8){const _0x56e806=_0x2b1b54,_0x5ddf90=this['ethersClient']['createContract'](_0x9856a9),_0x16e805=this[_0x56e806(0x192)][_0x56e806(0x1b8)](_0x4e0d30);await Helper[_0x56e806(0x1b2)](Helper[_0x56e806(0x1b7)],this['acc'],_0x56e806(0x1a0)+_0xfb46e5+']\x20'+await this[_0x56e806(0x1d0)](_0x3f2f77)+_0x56e806(0x1bb)+await this['getTokenSymbol'](_0x2d15dd),this['core']);!_0x3f2f77['NATIVE']&&(await this[_0x56e806(0x192)]['approveTokenSpend'](_0x3f2f77,_0x100750['CA']),await this[_0x56e806(0x192)]['fullFillBalance'](_0x3f2f77,_0xfb46e5,_0x42faaa));const _0x351282=ethers[_0x56e806(0x193)](_0xfb46e5[_0x56e806(0x1ad)](),await this[_0x56e806(0x1bc)](_0x3f2f77)),_0x572cf3=await _0x5ddf90[_0x56e806(0x1b1)](),_0x90971e=Number(ethers[_0x56e806(0x1a7)](_0x572cf3,await this[_0x56e806(0x1bc)](_0x2d15dd)))[_0x56e806(0x19e)](0x0),_0xdb0f2f=(Number(_0xfb46e5)*Number(_0x90971e))[_0x56e806(0x19e)](Number(await this[_0x56e806(0x1bc)](_0x2d15dd)))[_0x56e806(0x1ad)](),_0x59fcbd=ethers['parseUnits'](_0xdb0f2f,await this['getTokenDecimals'](_0x2d15dd));!_0x2d15dd[_0x56e806(0x1b9)]&&(await this[_0x56e806(0x192)][_0x56e806(0x199)](_0x2d15dd,_0x100750['CA']),await this['ethersClient'][_0x56e806(0x1a8)](_0x2d15dd,_0xdb0f2f,async()=>_0x7ce8f8(_0xdb0f2f)));await Helper[_0x56e806(0x1b2)](Helper['defaultLogDelay']*0x2,this[_0x56e806(0x1d1)],_0x56e806(0x1a2)+_0xfb46e5+']\x20'+await this[_0x56e806(0x1d0)](_0x3f2f77)+_0x56e806(0x1a4)+_0xdb0f2f+']\x20'+await this[_0x56e806(0x1d0)](_0x2d15dd),this[_0x56e806(0x1b6)]);const _0x2644be=[_0x9856a9['CA'],_0x351282,_0x59fcbd,Helper[_0x56e806(0x1c4)](_0x351282),Helper[_0x56e806(0x1c4)](_0x59fcbd),0x0,Helper['createTxDeadline']()],_0xa0fbb6=await _0x16e805[_0x56e806(0x1c6)][_0x56e806(0x19f)](..._0x2644be),_0x769162=await this[_0x56e806(0x192)][_0x56e806(0x1be)](_0xa0fbb6,_0x4e0d30['CA'],_0x3f2f77[_0x56e806(0x1b9)]?_0x351282:0x0);await this[_0x56e806(0x192)]['executeTx'](_0x769162),await _0x434bbb['insertData'](this['ethersClient'][_0x56e806(0x1bd)],new Date()[_0x56e806(0x1c0)](),_0x2394d9['Type']['LIQUIDITY_ADD']),await Helper[_0x56e806(0x1b2)](Helper[_0x56e806(0x1b7)]*0x2,this[_0x56e806(0x1d1)],'Successfully\x20add\x20liquidity\x20for\x20PAIR\x20['+_0xfb46e5+']\x20'+await this['getTokenSymbol'](_0x3f2f77)+'\x20\x20<>\x20['+_0xdb0f2f+']\x20'+await this[_0x56e806(0x1d0)](_0x2d15dd),this['core']);}}function _0x54a5(){const _0x6309e2=['delay','8KzSmrg','DECIMALS','63apmrlH','core','defaultLogDelay','createContract','NATIVE','error','\x20\x20<>\x20[???]\x20','getTokenDecimals','address','buildTxBody','value','toISOString','resAmount','80luENaP','symbol','createAmountWithSlippage','createTxDeadline','addDVMLiquidity','224430eLcjNU','insertData','Failed\x20to\x20get\x20DODO\x20route:\x20','data','SWAP','4922NkrdQA','includes','0.24','https://api.dodoex.io/route-service/v2/widget/getdodoroute?','getTokenSymbol','acc','LIQUIDITY_ADD','Getting\x20Route\x20of\x20','Prepairing\x20to\x20swap\x20','74484jbljeF','ethersClient','parseUnits','createQueryString','executeTx','666696sdUikI','7984QZaQrf','Try\x20To\x20Swap\x20','approveTokenSpend','createPool','slippageTolerance','getDodoRoute','\x20to\x20???\x20','toFixed','populateTransaction','Prepairing\x20to\x20Add\x20Liquidity\x20for\x20PAIR\x20[','dodoApiKey','Adding\x20Liquidity\x20for\x20PAIR\x20[','\x20to\x20','\x20\x20<>\x20[','decimals','Failed\x20to\x20get\x20decimals\x20for\x20token\x20','formatUnits','fullFillBalance','Successfully\x20swap\x20','gwei','47734ysghzz','message','toString','dodoSwap','277578QokqiN','defaultFeeTier','getMidPrice'];_0x54a5=function(){return _0x6309e2;};return _0x54a5();}
